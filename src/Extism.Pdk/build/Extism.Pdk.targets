<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<ItemGroup>
		<WasiNativeFileReference Include="$(MSBuildThisFileDirectory)..\native\extism_ffi.c" />
		<WasiAfterRuntimeLoaded Include="extism_pdk_attach_internal_calls" />
	</ItemGroup>

	<UsingTask TaskName="ExtismExportGenerator" AssemblyFile="$(MSBuildThisFileDirectory)..\lib\net7.0\Extism.Pdk.MSBuild.dll" />
	<Target Name="GenerateGlueCode" AfterTargets="Build">
		<ExtismExportGenerator AssemblyPath="$(TargetPath)" OutputPath="$(IntermediateOutputPath)extism.native.g.c" />
	</Target>

	<ItemGroup>
		<WasiNativeFileReference Include="$(IntermediateOutputPath)extism.native.g.c" />
	</ItemGroup>

</Project>